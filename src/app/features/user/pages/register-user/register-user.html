@if (loading()) {
  <div class="spinner-overlay">
    <app-spinner />
  </div>
}

<mat-card>
  <mat-card-header style="padding-bottom: 15px">
    <mat-card-title>Cadastro de Usuários </mat-card-title>
    <mat-card-subtitle>Informações do usuário</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <app-user-form #userFormRef />
  </mat-card-content>
  <mat-card-actions>
    <div fxLayout="row" fxLayoutAlign="space-between" class="full-width">
      <div fxLayout="row" fxLayoutGap="10px">
        <app-icon-button
          icon="lock"
          tooltipText="Alterar Senha"
          (click)="openChangePassDialog()"
          [disabled]="!canChangePassword"
        />
        <app-icon-button
          icon="mail_lock"
          tooltipText="Enviar email para recuperação de senha"
          (click)="openForgoutPassDialog()"
        />
      </div>
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end">
        <app-button
          text="Cancelar"
          (click)="returnToUsers()"
          type="button"
          bgColor="var(--cancel-color)"
        />
        <app-button
          text="Salvar"
          (click)="createOrUpdateUser(userFormRef.userFormGroup)"
        ></app-button>
      </div>
    </div>
  </mat-card-actions>
</mat-card>
